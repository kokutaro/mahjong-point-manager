# éº»é›€ å½¹ãƒ»é£œæ•°ãƒ˜ãƒ«ãƒ—æ©Ÿèƒ½ è¨­è¨ˆæ›¸

## 1. ç›®çš„ / æ¦‚è¦

- å¯¾å±€ä¸­ãŠã‚ˆã³ãƒ›ãƒ¼ãƒ ç”»é¢ã®ãƒ˜ãƒ«ãƒ—ã‹ã‚‰å‚ç…§ã§ãã‚‹ã€Œå½¹ã¨é£œæ•°ã®å¯¾å¿œè¡¨ã€ã¨ä»£è¡¨çš„ãªç‰Œå›³ã‚’æä¾›ã™ã‚‹ã€‚
- å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¸¡ç”»é¢ã§å†åˆ©ç”¨ã—ã€æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ã€i18nã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’æ‹…ä¿ã™ã‚‹ã€‚
- ãƒ«ãƒ¼ãƒ«å‰æï¼ˆã‚ªãƒ¼ãƒ—ãƒ³æ–­ä¹ˆç„¡ã—ã€æ•°ãˆå½¹æº€ç„¡ã—ã€ãƒ€ãƒ–ãƒ«å½¹æº€æœ‰ã‚Šã€æµã—æº€è²«æœ‰ã‚Šï¼‰ã‚’æ˜ç¤ºã—ã€é£œæ•°ãƒ»å½¹æº€ã®æ­£ç¢ºãªè¡¨ç¤ºã¨æ³¨æ„äº‹é …ã‚’æç¤ºã™ã‚‹ã€‚

## 2. å‰æãƒ«ãƒ¼ãƒ«

- ãƒ«ãƒ¼ãƒ«: æ—¥æœ¬ãƒªãƒ¼ãƒéº»é›€
- ã‚ªãƒ¼ãƒ—ãƒ³æ–­ä¹ˆ: ãªã—ï¼ˆå‰¯éœ²æ–­ä¹ˆã¯å½¹ã¨ã—ã¦æˆç«‹ã—ãªã„ï¼‰
- å–°ã„æ›¿ãˆ: ä¸å¯ï¼ˆæœ¬æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã¯è»½å¾®ï¼‰
- èµ¤ãƒ‰ãƒ©: é£œæ•°è¡¨è¨˜å¯¾è±¡å¤–ï¼ˆå½¹ã®ã¿æ²è¼‰ï¼‰ã€‚ãƒ‰ãƒ©ã¯æ³¨è¨˜ã¨ã—ã¦èª¬æ˜ã€‚
- æ•°ãˆå½¹æº€: éå¯¾è±¡ï¼ˆè¤‡åˆå½¹ã®ãŸã‚æ¡ç”¨ã—ãªã„ï¼‰
- ãƒ€ãƒ–ãƒ«å½¹æº€: æ¡ç”¨ï¼ˆä¾‹: å››æš—åˆ»å˜é¨ã€ç´”æ­£ä¹è“®å®ç‡ˆï¼‰
- æµã—æº€è²«: æ¡ç”¨
- å–°ã„ä¸‹ãŒã‚Š: æ¨™æº–ï¼ˆä¾‹: ä¸‰è‰²2/1ã€æ··ä¸€3/2ã€ç´”ãƒãƒ£ãƒ³3/2ï¼‰

## 3. ã‚¹ã‚³ãƒ¼ãƒ— / éã‚¹ã‚³ãƒ¼ãƒ—

- ã‚¹ã‚³ãƒ¼ãƒ—
  - å½¹ã¨é£œæ•°ã®ä¸€è¦§ï¼ˆé–€å‰/å‰¯éœ²ã®åˆ¥ã€å½¹æº€ãƒ»ãƒ€ãƒ–ãƒ«å½¹æº€ï¼‰
  - ä»£è¡¨çš„ãªç‰Œå›³ï¼ˆ1å½¹ã«ã¤ã1â€“2ä¾‹ï¼‰ã¨æˆç«‹æ¡ä»¶ãƒ»æ³¨æ„ç‚¹ã®çŸ­æ–‡
  - æ¤œç´¢ï¼ˆåç§°/åˆ¥å: ã‹ãª/ã‚«ãƒŠ/ãƒ­ãƒ¼ãƒå­—å¯¾å¿œï¼‰ã¨ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚«ãƒ†ã‚´ãƒª/é£œæ•°/å½¹æº€ï¼‰
  - ãƒ«ãƒ¼ãƒ«å‡¡ä¾‹ï¼ˆãƒ€ãƒ–ãƒ«å½¹æº€ã‚ã‚Šã€æµã—æº€è²«ã‚ã‚Šç­‰ï¼‰ã®è¡¨ç¤º
  - i18nå¯¾å¿œï¼ˆåˆæœŸã¯æ—¥æœ¬èªã€‚ã‚­ãƒ¼è¨­è¨ˆã§è‹±èªç­‰ã‚’å°†æ¥è¿½åŠ å¯èƒ½ï¼‰
- éã‚¹ã‚³ãƒ¼ãƒ—
  - ç‚¹æ•°è¨ˆç®—ãã®ã‚‚ã®ã®å¤‰æ›´ï¼ˆæœ¬æ©Ÿèƒ½ã¯ãƒ˜ãƒ«ãƒ—è¡¨ç¤ºã«é™å®šï¼‰
  - å½¹ã®è‡ªå‹•åˆ¤å®šï¼ˆåˆ¥æ©Ÿèƒ½ï¼‰
  - ç”»åƒã‚¢ã‚»ãƒƒãƒˆé…å¸ƒï¼ˆåˆæœŸã¯Unicodeã‚°ãƒªãƒ•ã§æç”»ï¼‰

## 4. UI/UX ä»•æ§˜

- è¡¨ç¤ºæ–¹é‡
  - UTF-8ã®éº»é›€ç‰Œã‚°ãƒªãƒ•ï¼ˆUnicode Mahjong Tilesï¼‰ã§ç‰Œã‚’è¡¨ç¤ºã€‚èµ¤5ã¯æ–‡å­—è‰²ã‚’èµ¤ã§è¡¨ç¾ã€‚
  - ã‚¹ãƒãƒ›å„ªå…ˆï¼ˆæœ€å°å¹…320pxï¼‰ã€‚ãƒ¢ãƒã‚¤ãƒ«ã¯ã‚«ãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¯è¡¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’åŸºæœ¬ã€‚
- æƒ…å ±æ§‹é€ 
  - ãƒ˜ãƒƒãƒ€: ã‚¿ã‚¤ãƒˆãƒ«ã€æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒœã‚¿ãƒ³/ã‚¿ãƒ–
  - æœ¬ä½“: å½¹ãƒªã‚¹ãƒˆï¼ˆå½¹æº€â†’é«˜é£œâ†’ä½é£œã®é †ï¼‰ã€‚å„è¡Œã«å½¹åã€é£œæ•°ï¼ˆé–€å‰/å‰¯éœ² or å½¹æº€/ãƒ€ãƒ–ãƒ«å½¹æº€ï¼‰ã€ä»£è¡¨å½¢ï¼ˆæœ€å¤§2ä¾‹ï¼‰ã€æ³¨è¨˜ã‚¢ã‚¤ã‚³ãƒ³/ãƒ†ã‚­ã‚¹ãƒˆ
  - ãƒ•ãƒƒã‚¿/å‡¡ä¾‹: ãƒ«ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã®ãƒãƒƒã‚¸ï¼ˆã€Œã‚ªãƒ¼ãƒ—ãƒ³æ–­ä¹ˆãªã—ã€ã€Œãƒ€ãƒ–ãƒ«å½¹æº€ã‚ã‚Šã€ã€Œæµã—æº€è²«ã‚ã‚Šã€ã€Œæ•°ãˆå½¹æº€ãªã—ã€ï¼‰
- æ¤œç´¢/ãƒ•ã‚£ãƒ«ã‚¿
  - æ¤œç´¢: åç§°ãƒ»åˆ¥åã®éƒ¨åˆ†ä¸€è‡´ã€‚å…¥åŠ›ã¯NFKCæ­£è¦åŒ–ã€ã‹ãª/ã‚«ãƒŠç›¸äº’å¤‰æ›ã€ãƒ­ãƒ¼ãƒå­—å°æ–‡å­—åŒ–ã€‚
  - ãƒ•ã‚£ãƒ«ã‚¿: ã‚«ãƒ†ã‚´ãƒªï¼ˆé–€å‰é™å®š/å–°ã„ä¸‹ãŒã‚Š/å½¹æº€/ãã®ä»–ï¼‰ã€é£œæ•°ï¼ˆ1/2/3/6/æº€è²«ä»¥ä¸Š/å½¹æº€ï¼‰ã€‚
  - ã‚½ãƒ¼ãƒˆ: å½¹æº€ > é£œæ•°é™é † > åå‰ï¼ˆãƒ­ã‚±ãƒ¼ãƒ«é †ï¼‰ã€‚
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
  - ç‰Œã¯ `role="img"` ã¨ `aria-label`ï¼ˆä¾‹: ã€Œå››ç´¢ã€ã€Œäº”è¬ èµ¤ã€ï¼‰ã€‚
  - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œå¯¾å¿œï¼ˆæ¤œç´¢å…¥åŠ›/ã‚¿ãƒ–/ãƒ•ã‚£ãƒ«ã‚¿ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•ï¼‰ã€‚
  - ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã¯WCAG AAã‚’ç›®æ¨™ã€‚

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

TypeScriptå‹ï¼ˆå®Ÿè£…é…ç½®ã¯ `src/lib/mahjong` ã‚’æƒ³å®šï¼‰

```ts
// tiles.ts
export type TileSuit = "m" | "p" | "s" | "z"
export type TileCode =
  | `${"m" | "p" | "s"}${1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9}`
  | `${"m" | "p" | "s"}5r` // èµ¤5
  | `z${1 | 2 | 3 | 4 | 5 | 6 | 7}` // æ±å—è¥¿åŒ—ç™½ç™¼ä¸­

// yaku.ts
export type YakuCategory = "menzen-only" | "kuisagari" | "misc" | "yakuman"
export type HanValue =
  | { kind: "han"; closed: number | null; open: number | null }
  | { kind: "yakuman"; rank: 1 | 2 }

export type Example = {
  tiles: TileCode[] // æ‰‹ç‰Œä¾‹ï¼ˆ14æšæƒ³å®šã ãŒã€æ¦‚è¦è¡¨ç¾ã§ã‚‚å¯ï¼‰
  descriptionKey?: string // ä¾‹ã®è£œè¶³
}

export type Yaku = {
  id: string // ä¾‹: 'pinfu', 'tanyao', 'daisangen'
  nameKey: string // i18nã‚­ãƒ¼: yaku.pinfu.name
  aliases: string[] // ä¾‹: ['å¹³å’Œ','ãƒ”ãƒ³ãƒ•','pinfu']
  category: YakuCategory
  value: HanValue
  notesKey?: string // i18nã‚­ãƒ¼: æˆç«‹æ¡ä»¶/æ³¨æ„ç‚¹
  examples?: Example[] // æœ€å¤§2ä¾‹
  ruleFlags?: {
    doubleYakuman?: boolean // ãƒ€ãƒ–ãƒ«å½¹æº€ã‹
    nagashiMangan?: boolean // æµã—æº€è²«è¡¨è¨˜ç”¨
  }
}

export type RuleSet = {
  openTanyao: false
  doubleYakuman: true
  nagashiMangan: true
  kazoeYakuman: false
}
```

### 5.1 å½¹ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚µãƒ³ãƒ—ãƒ« 10ä»¶ï¼‰

å®Ÿä½“ã¯ `src/data/yaku/ja.ts` ã«é…åˆ—ã§å®šç¾©ã—ã€`nameKey`/`notesKey`/`descriptionKey` ã¯ `locales/ja.json` ã‚’å‚ç…§ã€‚

```ts
export const yakuJa: Yaku[] = [
  {
    id: "pinfu",
    nameKey: "yaku.pinfu.name",
    aliases: ["å¹³å’Œ", "ãƒ”ãƒ³ãƒ•", "pinfu"],
    category: "menzen-only",
    value: { kind: "han", closed: 1, open: null },
    notesKey: "yaku.pinfu.note",
    examples: [
      {
        tiles: [
          "m2",
          "m3",
          "m4",
          "p4",
          "p5",
          "p6",
          "s3",
          "s4",
          "s5",
          "s7",
          "s8",
          "s9",
          "m6",
          "m6",
        ],
        descriptionKey: "yaku.pinfu.ex1",
      },
    ],
  },
  {
    id: "tanyao",
    nameKey: "yaku.tanyao.name",
    aliases: ["æ–­ä¹ˆä¹", "ã‚¿ãƒ³ãƒ¤ã‚ª", "tanyao"],
    category: "kuisagari",
    value: { kind: "han", closed: 1, open: 1 },
    notesKey: "yaku.tanyao.note",
    examples: [
      {
        tiles: [
          "m2",
          "m3",
          "m4",
          "p3",
          "p4",
          "p5",
          "s6",
          "s7",
          "s8",
          "m7",
          "m8",
          "m9",
          "p2",
          "p2",
        ],
      },
    ],
  },
  {
    id: "iipeiko",
    nameKey: "yaku.iipeiko.name",
    aliases: ["ä¸€ç›ƒå£", "ã‚¤ãƒ¼ãƒšãƒ¼ã‚³ãƒ¼", "iipeiko"],
    category: "menzen-only",
    value: { kind: "han", closed: 1, open: null },
    notesKey: "yaku.iipeiko.note",
    examples: [
      {
        tiles: [
          "m2",
          "m3",
          "m4",
          "m2",
          "m3",
          "m4",
          "p6",
          "p7",
          "p8",
          "s3",
          "s4",
          "s5",
          "z1",
          "z1",
        ],
      },
    ],
  },
  {
    id: "toitoi",
    nameKey: "yaku.toitoi.name",
    aliases: ["å¯¾ã€…å’Œ", "ãƒˆã‚¤ãƒˆã‚¤", "toitoi"],
    category: "misc",
    value: { kind: "han", closed: 2, open: 2 },
    notesKey: "yaku.toitoi.note",
    examples: [
      {
        tiles: [
          "m3",
          "m3",
          "m3",
          "p7",
          "p7",
          "p7",
          "s9",
          "s9",
          "s9",
          "z1",
          "z1",
          "z1",
          "m8",
          "m8",
        ],
      },
    ],
  },
  {
    id: "sanshoku",
    nameKey: "yaku.sanshoku.name",
    aliases: ["ä¸‰è‰²åŒé †", "ã‚µãƒ³ã‚·ãƒ§ã‚¯", "sanshoku"],
    category: "kuisagari",
    value: { kind: "han", closed: 2, open: 1 },
    notesKey: "yaku.sanshoku.note",
    examples: [
      {
        tiles: [
          "m4",
          "m5",
          "m6",
          "p4",
          "p5",
          "p6",
          "s4",
          "s5",
          "s6",
          "m2",
          "m2",
          "s9",
          "s9",
          "s9",
        ],
      },
    ],
  },
  {
    id: "honitsu",
    nameKey: "yaku.honitsu.name",
    aliases: ["æ··ä¸€è‰²", "ãƒ›ãƒ³ã‚¤ãƒ„", "honitsu"],
    category: "kuisagari",
    value: { kind: "han", closed: 3, open: 2 },
    notesKey: "yaku.honitsu.note",
  },
  {
    id: "junchan",
    nameKey: "yaku.junchan.name",
    aliases: ["ç´”å…¨å¸¯ä¹ˆä¹", "ã‚¸ãƒ¥ãƒ³ãƒãƒ£ãƒ³", "junchan"],
    category: "kuisagari",
    value: { kind: "han", closed: 3, open: 2 },
    notesKey: "yaku.junchan.note",
  },
  {
    id: "chinitsu",
    nameKey: "yaku.chinitsu.name",
    aliases: ["æ¸…ä¸€è‰²", "ãƒãƒ³ã‚¤ãƒ„", "chinitsu"],
    category: "kuisagari",
    value: { kind: "han", closed: 6, open: 5 },
    notesKey: "yaku.chinitsu.note",
  },
  {
    id: "daisangen",
    nameKey: "yaku.daisangen.name",
    aliases: ["å¤§ä¸‰å…ƒ", "ã ã„ã•ã‚“ã’ã‚“", "daisangen"],
    category: "yakuman",
    value: { kind: "yakuman", rank: 1 },
    notesKey: "yaku.daisangen.note",
    examples: [
      {
        tiles: [
          "z5",
          "z5",
          "z5",
          "z6",
          "z6",
          "z6",
          "z7",
          "z7",
          "z7",
          "m2",
          "m3",
          "m4",
          "p6",
          "p7",
        ],
      },
    ],
  },
  {
    id: "suankou-tanki",
    nameKey: "yaku.suankouTanki.name",
    aliases: ["å››æš—åˆ»å˜é¨", "ã‚¹ãƒ¼ã‚¢ãƒ³ã‚³ã‚¦å˜é¨", "suankou-tanki"],
    category: "yakuman",
    value: { kind: "yakuman", rank: 2 },
    notesKey: "yaku.suankouTanki.note",
    ruleFlags: { doubleYakuman: true },
  },
]
```

## 6. ç‰Œè¡¨ç¤ºæ–¹å¼ï¼ˆUnicodeï¼‰

- è¬å­: `m1..m9 -> U+1F007..U+1F00F`
- ç´¢å­: `s1..s9 -> U+1F010..U+1F018`
- ç­’å­: `p1..p9 -> U+1F019..U+1F021`
- é¢¨ç‰Œ: `z1..z4 -> U+1F000(East) .. U+1F003(North)`
- ä¸‰å…ƒç‰Œ: `z5..z7 -> U+1F006(ç™½) / U+1F005(ç™¼) / U+1F004(ä¸­)`
- èµ¤5: `m5r/p5r/s5r` ã¯é€šå¸¸ã®5ã‚’ä½¿ã„ã€æ–‡å­—è‰²ã‚’èµ¤ç³»ï¼ˆä¾‹: Tailwind `text-red-500`ï¼‰ã§è¡¨ç¾ã€‚
- å‚™è€ƒ: è¡¨ç¤ºã¯OS/ãƒ•ã‚©ãƒ³ãƒˆã«ä¾å­˜ã€‚å°†æ¥ã€Webãƒ•ã‚©ãƒ³ãƒˆåŒæ¢±ã¾ãŸã¯SVGæç”»æ–¹å¼ã«æ‹¡å¼µå¯èƒ½ãªè¨­è¨ˆã¨ã™ã‚‹ã€‚

### 6.1 ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£è¨­è¨ˆ

`src/lib/mahjong/tiles.ts`

```ts
export function tileToUnicode(code: TileCode): string {
  /* å®Ÿè£… */
}
export function tileAriaLabel(code: TileCode): string {
  /* å®Ÿè£… */
}
```

## 7. i18n ã‚­ãƒ¼æ–¹é‡

- å½¹å: `yaku.<id>.name`ï¼ˆä¾‹: `yaku.pinfu.name`ï¼‰
- æ³¨è¨˜: `yaku.<id>.note`
- ä¾‹ã®èª¬æ˜: `yaku.<id>.ex1`, `yaku.<id>.ex2`
- UIæ–‡è¨€: `help.title`, `help.search.placeholder`, `filter.category.menzenOnly`, `filter.han.1`, `legend.doubleYakuman` ãªã©
- åˆæœŸãƒ­ã‚±ãƒ¼ãƒ«: `ja`ã€‚ã‚­ãƒ¼è¨­è¨ˆã¯å°†æ¥çš„ã« `en` ç­‰ã®è¿½åŠ ã‚’å‰æã€‚

## 8. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

- `components/tiles/Tile.tsx`
  - props: `code: TileCode; size?: 'xs'|'sm'|'md'|'lg'; className?: string; ariaLabel?: string`
  - å½¹å‰²: å˜ç‰Œè¡¨ç¤ºï¼ˆUnicodeã‚°ãƒªãƒ•ï¼‰ã€‚èµ¤5ã¯ã‚«ãƒ©ãƒ¼é©ç”¨ã€‚
- `components/tiles/TileGroup.tsx`
  - props: `codes: TileCode[]; size?; gap?: 'none'|'sm'|'md'; wrap?: boolean`
  - å½¹å‰²: ç‰Œåˆ—è¡¨ç¤ºï¼ˆä»£è¡¨å½¢ã‚’æ¨ªä¸¦ã³è¡¨ç¤ºï¼‰ã€‚
- `components/yaku/YakuRow.tsx`
  - props: `{ yaku: Yaku; locale: string }`
  - å½¹å‰²: 1å½¹ã®è¡Œï¼ˆå½¹åã€é£œ/å½¹æº€ã€ä»£è¡¨å½¢ã€æ³¨è¨˜ï¼‰ã€‚
- `components/yaku/YakuTable.tsx`
  - props: `{ data: Yaku[]; locale: string; defaultFilters?: Filter }`
  - å½¹å‰²: æ¤œç´¢/ãƒ•ã‚£ãƒ«ã‚¿/ã‚½ãƒ¼ãƒˆå«ã‚€ä¸€è¦§ã€‚ãƒ¢ãƒã‚¤ãƒ«ã¯ã‚«ãƒ¼ãƒ‰åŒ–ã€‚
- `components/yaku/RuleLegend.tsx`
  - å½¹å‰²: ãƒ«ãƒ¼ãƒ«å‰æã®ãƒãƒƒã‚¸è¡¨ç¤ºã€‚
- `components/help/YakuHelp.tsx`
  - å½¹å‰²: `RuleLegend + YakuTable` ã‚’ä¸€ä½“åŒ–ã—ãŸãƒ˜ãƒ«ãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€‚ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ä¸­èº«ã¨ã—ã¦å†åˆ©ç”¨ã€‚

## 9. æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ä»•æ§˜

- æ­£è¦åŒ–: NFKCã€å…¨åŠè§’çµ±ä¸€ã€ã‚«ãƒŠâ†’ã²ã‚‰ãŒãªã€ãƒ­ãƒ¼ãƒå­—ã‚’å°æ–‡å­—åŒ–ã€‚
- å¯¾è±¡: å½¹åï¼ˆãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚ºå¾Œæ–‡å­—åˆ—ï¼‰ã€`aliases`ï¼ˆä»®å/æ¼¢å­—/ãƒ­ãƒ¼ãƒå­—/ç•¥ç§°ï¼‰ã€‚
- ãƒ•ã‚£ãƒ«ã‚¿:
  - ã‚«ãƒ†ã‚´ãƒª: é–€å‰é™å®šã€å–°ã„ä¸‹ãŒã‚Šã€å½¹æº€ã€ãã®ä»–ã€‚
  - é£œæ•°: 1/2/3/6/æº€è²«ä»¥ä¸Š/å½¹æº€ï¼ˆ`kind: 'yakuman'` ã§åˆ¤å®šï¼‰ã€‚
- ã‚½ãƒ¼ãƒˆ: å½¹æº€ > é£œæ•°é™é †ï¼ˆé–€å‰å„ªå…ˆã€åŒç‚¹ã¯å‰¯éœ²ï¼‰> åå‰ï¼ˆãƒ­ã‚±ãƒ¼ãƒ«ï¼‰ã€‚

## 10. çµ±åˆ / çŠ¶æ…‹ç®¡ç†

- Zustand UIã‚¹ãƒ©ã‚¤ã‚¹ï¼ˆä¾‹ï¼‰
  - `helpPanel: { isOpen: boolean; tab: 'yaku' | 'settlement' }`
  - æ—¢å­˜ã‚²ãƒ¼ãƒ è¨­å®šï¼ˆãƒ«ãƒ¼ãƒ«ï¼‰ã‚’èª­ã¿å–ã‚Š `RuleLegend` ã«åæ˜ ã€‚
- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°/å°ç·š
  - ãƒ›ãƒ¼ãƒ ãƒ»å¯¾å±€ç”»é¢ã«ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ã‚’é…ç½®ã€‚ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã« `YakuHelp` ã‚’ãƒã‚¦ãƒ³ãƒˆã€‚
  - SSRä¸è¦ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ã€‚

## 11. ãƒ†ã‚¹ãƒˆè¨ˆç”»

- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
  - `tileToUnicode`: å„ã‚¹ãƒ¼ãƒ„/æ•°å­—/å­—ç‰Œã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæ­£ã—ã„ã“ã¨ã€‚
  - `tileAriaLabel`: æ—¥æœ¬èªãƒ©ãƒ™ãƒ«ãŒæœŸå¾…é€šã‚Šã€èµ¤5ã«ã€Œèµ¤ã€ãŒä»˜ãã“ã¨ã€‚
  - æ¤œç´¢æ­£è¦åŒ–: ã‹ãª/ã‚«ãƒŠ/ãƒ­ãƒ¼ãƒå­—ãƒ»å…¨åŠè§’ãƒ»å¤§å°ã®å·®ç•°ã‚’è¨±å®¹ã€‚
- è¡¨ç¤º
  - `YakuRow`: é–€å‰ã¨å‰¯éœ²ã®é£œè¡¨ç¤ºï¼ˆ`null`ã¯éè¡¨ç¤º/ãƒ€ãƒƒã‚·ãƒ¥ï¼‰ã€‚
  - å½¹æº€ãƒ©ãƒ³ã‚¯: ã‚·ãƒ³ã‚°ãƒ«/ãƒ€ãƒ–ãƒ«ã®åŒºåˆ¥è¡¨ç¤ºã€‚
  - ãƒ•ã‚£ãƒ«ã‚¿: è¤‡åˆæ¡ä»¶é©ç”¨æ™‚ã®ä»¶æ•°ãŒæœŸå¾…é€šã‚Šã€‚
- i18n
  - `ja` ã‚­ãƒ¼ã®å­˜åœ¨æ¤œæŸ»ã€‚æœªç¿»è¨³ã‚­ãƒ¼ãŒéœ²å‡ºã—ãªã„ã€‚
- é…ç½®ï¼ˆæ¨å¥¨ï¼‰
  - `src/lib/mahjong/__tests__/tiles.test.ts`
  - `src/lib/mahjong/__tests__/search.test.ts`
  - `src/components/yaku/__tests__/yakuTable.test.tsx`

## 12. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ / ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
  - å½¹ãƒ‡ãƒ¼ã‚¿ã¯é™çš„TSã§ç´„40ä»¶ã‚’ãƒãƒ³ãƒ‰ãƒ«ã€‚ä»®æƒ³åŒ–ã¯ä¸è¦ã€‚
  - Unicodeã‚°ãƒªãƒ•ã¯è»½é‡ã€‚Webãƒ•ã‚©ãƒ³ãƒˆã¯å¿…è¦ã«å¿œã˜å°†æ¥æ¤œè¨ã€‚
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
  - ç‰Œã¯ `role="img"` ã¨ `aria-label`ã€‚
  - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯è¦–åŒ–ã€ãƒ©ãƒ™ãƒ«ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆAAã€‚

## 13. ãƒªã‚¹ã‚¯ / å¯¾å¿œ

- ãƒ•ã‚©ãƒ³ãƒˆå·®ç•°: OSä¾å­˜ã§è¦‹ãŸç›®ã®å·®ç•° â†’ å°†æ¥çš„ã«Webãƒ•ã‚©ãƒ³ãƒˆåŒæ¢±ã¾ãŸã¯SVGãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã¸åˆ‡æ›¿å¯èƒ½ãªè¨­è¨ˆï¼ˆ`Tile` ã®rendereræ‹¡å¼µï¼‰ã€‚
- èµ¤5è¦–èªæ€§: ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã§ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆä½ä¸‹ â†’ `text-red-500` ã¨èƒŒæ™¯/å½±ã§è£œå¼·ã€‚
- ä¾‹å›³ã®èª¤è§£: ä¾‹ã¯1â€“2ã«é™å®š â†’ æˆç«‹æ¡ä»¶/æ³¨æ„ç‚¹ã‚’æ˜ç¤ºã€èª¤è§£ã‚’é¿ã‘ã‚‹æ³¨è¨˜ã‚’è¿½åŠ ã€‚

## 14. ä»Šå¾Œã®æ‹¡å¼µ

- è‹±èªç¿»è¨³ã®è¿½åŠ ï¼ˆ`locales/en.json`ï¼‰ã€‚
- SVGã‚¿ã‚¤ãƒ«ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³åŒ–ï¼ˆæç”»å·®ç•°ã®å¸åï¼‰ã€‚
- å½¹ãƒ‡ãƒ¼ã‚¿ã®è©³ç´°åŒ–ï¼ˆæ··è€é ­ã€ä¸‰æš—åˆ»ã€äºŒç›ƒå£ã€å›½å£«ç„¡åŒ13é¢ç­‰ã®è¿½åŠ ã¨æ³¨æ„ç‚¹ï¼‰ã€‚
- ãƒ•ã‚£ãƒ«ã‚¿ã®ä¿å­˜ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰ã¨å…±æœ‰URLã‚¯ã‚¨ãƒªã€‚

---

ä»˜éŒ²A: ã‚¿ã‚¤ãƒ«ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å®Ÿè£…ãƒ¡ãƒ¢

```ts
// ä¾‹ç¤º: tileToUnicode ã®éª¨å­
const MAP_WINDS = ["\u{1F000}", "\u{1F001}", "\u{1F002}", "\u{1F003}"] // æ±å—è¥¿åŒ—
const MAP_DRAGONS = ["\u{1F006}", "\u{1F005}", "\u{1F004}"] // ç™½ç™¼ä¸­ï¼ˆé †æ³¨æ„ï¼‰

export function tileToUnicode(code: TileCode): string {
  const suit = code[0] as TileSuit
  const isRed = code.endsWith("5r")
  if (suit === "z") {
    const n = Number(code.slice(1))
    if (n >= 1 && n <= 4) return MAP_WINDS[n - 1]
    if (n === 5) return MAP_DRAGONS[0] // ç™½
    if (n === 6) return MAP_DRAGONS[1] // ç™¼
    if (n === 7) return MAP_DRAGONS[2] // ä¸­
  } else {
    const n = Number(code[1])
    if (suit === "m") return String.fromCodePoint(0x1f006 + n) // 1->0x1F007 .. 9->0x1F00F
    if (suit === "s") return String.fromCodePoint(0x1f009 + n) // 1->0x1F010 .. 9->0x1F018
    if (suit === "p") return String.fromCodePoint(0x1f012 + n) // 1->0x1F019 .. 9->0x1F021
  }
  return "ğŸ€«" // ä¸æ˜æ™‚
}

export function tileAriaLabel(code: TileCode): string {
  const suit = code[0] as TileSuit
  const isRed = code.endsWith("5r")
  const label = (() => {
    if (suit === "z") {
      const n = Number(code.slice(1))
      return ["æ±", "å—", "è¥¿", "åŒ—", "ç™½", "ç™¼", "ä¸­"][n - 1]
    }
    const n = code[1]
    const suitLabel = suit === "m" ? "è¬" : suit === "p" ? "ç­’" : "ç´¢"
    const num = ["ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹"][
      Number(n) - 1
    ]
    return `${num}${suitLabel}`
  })()
  return isRed ? `${label} èµ¤` : label
}
```

ä»˜éŒ²B: i18n ã‚­ãƒ¼ä¾‹ï¼ˆjaï¼‰

```json
{
  "help.title": "å½¹ã¨é£œæ•°",
  "help.search.placeholder": "å½¹åãƒ»åˆ¥åã§æ¤œç´¢",
  "legend.doubleYakuman": "ãƒ€ãƒ–ãƒ«å½¹æº€ã‚ã‚Š",
  "legend.nagashiMangan": "æµã—æº€è²«ã‚ã‚Š",
  "legend.noOpenTanyao": "ã‚ªãƒ¼ãƒ—ãƒ³æ–­ä¹ˆãªã—",
  "legend.noKazoeYakuman": "æ•°ãˆå½¹æº€ãªã—",

  "yaku.pinfu.name": "å¹³å’Œ",
  "yaku.pinfu.note": "é–€å‰ã®ã¿ã€‚å››é¢å­ä¸€é›€é ­ã€ä¸¡é¢å¾…ã¡ã€æ‰‹ä¸­ã«å½¹ç‰Œåˆ»å­ãŒãªã„ã“ã¨ãªã©ã€‚",
  "yaku.pinfu.ex1": "å…¨é †å­æ§‹æˆã€ä¸¡é¢å¾…ã¡ã®ä¾‹",

  "yaku.tanyao.name": "æ–­ä¹ˆä¹",
  "yaku.tanyao.note": "1ãƒ»9ãƒ»å­—ç‰Œã‚’å«ã¾ãªã„ã€‚æ¨™æº–ãƒ«ãƒ¼ãƒ«ã§ã¯å‰¯éœ²ã‚‚1é£œã€‚",

  "yaku.iipeiko.name": "ä¸€ç›ƒå£",
  "yaku.iipeiko.note": "é–€å‰ã®ã¿ã€‚åŒä¸€é †å­ã®å¯¾å­ã€‚",

  "yaku.toitoi.name": "å¯¾ã€…å’Œ",
  "yaku.toitoi.note": "é †å­ã‚’å«ã¾ãªã„ã€‚åˆ»å­/æ§“å­Ã—4ã€‚",

  "yaku.sanshoku.name": "ä¸‰è‰²åŒé †",
  "yaku.sanshoku.note": "åŒä¸€æ•°å­—ã®é †å­ã‚’ä¸‰è‰²ã§æƒãˆã‚‹ã€‚å–°ã„ä¸‹ãŒã‚Šã‚ã‚Šã€‚",

  "yaku.honitsu.name": "æ··ä¸€è‰²",
  "yaku.honitsu.note": "å­—ç‰Œï¼‹ä¸€è‰²ã€‚å–°ã„ä¸‹ãŒã‚Šã‚ã‚Šã€‚",

  "yaku.junchan.name": "ç´”å…¨å¸¯ä¹ˆä¹",
  "yaku.junchan.note": "ã™ã¹ã¦ã®é¢å­ãŒ1ãƒ»9ã‚’å«ã‚€ã€‚å–°ã„ä¸‹ãŒã‚Šã‚ã‚Šã€‚",

  "yaku.chinitsu.name": "æ¸…ä¸€è‰²",
  "yaku.chinitsu.note": "ä¸€è‰²ã®ã¿ã€‚å–°ã„ä¸‹ãŒã‚Šã‚ã‚Šã€‚",

  "yaku.daisangen.name": "å¤§ä¸‰å…ƒ",
  "yaku.daisangen.note": "ç™½ãƒ»ç™¼ãƒ»ä¸­ã®åˆ»å­ã‚’æƒãˆã‚‹ã€‚",

  "yaku.suankouTanki.name": "å››æš—åˆ»å˜é¨",
  "yaku.suankouTanki.note": "æš—åˆ»Ã—4ï¼‹å˜é¨å¾…ã¡ã€‚ãƒ€ãƒ–ãƒ«å½¹æº€ã€‚"
}
```
